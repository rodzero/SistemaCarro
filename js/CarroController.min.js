function CarroController(e,a){function t(e){document.getElementById("carro_id").value=e.codigo,document.getElementById("fabricante").value=e.fabricante,document.getElementById("modelo").value=e.modelo,document.getElementById("ano").value=e.ano,document.getElementById("cor").value=e.cor,document.getElementById("placa").value=e.placa,document.getElementById("valor_dia").value=e.valorDia,document.getElementById("valor_km").value=e.valorKm}function n(e,t){window.confirm("Confirma a exclus√£o do registro?")&&(o(e),a.splice(a.indexOf(t),1),AppCarro.persisteCarros(),AppCarro.mostraNotificacao("Cadastro de Carros","Carro removido com sucesso","success"))}function o(e){m.lista.removeChild(e)}function l(){m.lista.textContent="";for(var e=0;e<a.length;e++)m.adicionaCarroLista(a[e])}function r(e){var a=document.getElementById("placa"),t=/([A-Za-z]{1,3}[0-9]{1,4})/,n=t.exec(a.value);null!==n||a.value.length<=7?a.value=n[1].toUpperCase():a.value=""}function d(e){var a=document.getElementById("ano"),t=/([0-9]{1,4})/,n=t.exec(a.value);null!==n?a.value=n[1]:a.value=""}function c(e){var a=e.currentTarget;if(""!=a.value){var t=/^([0-9]{0,5})+(\.[1-9]{0,2})?$/,n=t.exec(a.value);null!==n?a.value=n[0]:a.value=a.value.substring(0,a.value.length-1)}}function u(){l();var e=document.getElementById("salvar"),a=document.getElementById("cancelar"),t=document.getElementById("placa"),n=document.getElementById("ano"),o=document.getElementById("valor_dia"),u=document.getElementById("valor_km");return t.addEventListener("keyup",r,!1),n.addEventListener("keyup",d,!1),o.addEventListener("keyup",c,!1),u.addEventListener("keyup",c,!1),e.addEventListener("click",m.salvarCarro,!1),a.addEventListener("click",m.limpaCampos,!1),m}var m={};return m.lista=e,m.carregaCarros=l,m.adicionaCarroLista=function(e){var a=document.getElementById("carroListItem"),o=a.content.firstElementChild.cloneNode(!0);TPC.replaceWithData(o,e);var l=o.getElementsByClassName("edita-carro")[0];l.addEventListener("click",function(){t(e)},!1);var r=o.getElementsByClassName("deleta-carro")[0];r.addEventListener("click",function(){n(o,e)},!1),m.lista.appendChild(o)},m.salvarCarro=function(e){if(""!=document.getElementById("carro_id").value){var a=AppCarro.getCarro(document.getElementById("carro_id").value);a.fabricante=document.getElementById("fabricante").value,a.modelo=document.getElementById("modelo").value,a.ano=document.getElementById("ano").value,a.cor=document.getElementById("cor").value,a.placa=document.getElementById("placa").value,a.valorDia=document.getElementById("valor_dia").value,a.valorKm=document.getElementById("valor_km").value}else{var t=new Carro(document.getElementById("fabricante").value,document.getElementById("modelo").value,document.getElementById("ano").value,document.getElementById("cor").value,document.getElementById("placa").value,document.getElementById("valor_dia").value,document.getElementById("valor_km").value);AppCarro.getCatalog().push(t),m.adicionaCarroLista(t)}AppCarro.persisteCarros(),AppCarro.mostraNotificacao("Cadastro de Carros","Carro salvo com sucesso!","success")},m.atualizaItem=function(e,a){e.children[0].innerHTML=void 0==a.fabricante?"":a.fabricante,e.children[1].innerHTML=void 0==a.modelo?"":a.modelo,e.children[2].innerHTML=void 0==a.ano?"":a.ano,e.children[3].innerHTML=void 0==a.cor?"":a.cor,e.children[4].innerHTML=void 0==a.placa?"":a.placa},m.limpaCampos=function(){document.getElementById("carro_id").value="",document.getElementById("fabricante").value="",document.getElementById("modelo").value="",document.getElementById("ano").value="",document.getElementById("cor").value="",document.getElementById("placa").value="",document.getElementById("valor_dia").value="",document.getElementById("valor_km").value="",document.getElementById("fabricante").focus()},u()}
