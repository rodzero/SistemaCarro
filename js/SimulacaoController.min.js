function SimulacaoController(e){function o(){var e=AppCarro.getCatalog();document.getElementById("carroEscolhido").textContent="";var o=document.createElement("option");document.getElementById("carroEscolhido").appendChild(o);for(var t=0;t<e.length;t++){var a=document.getElementById("carroOpcaoItem"),n=a.content.firstElementChild.cloneNode(!0);n.value=e[t].codigo,TPC.replaceWithData(n,e[t]),document.getElementById("carroEscolhido").appendChild(n)}}function t(){"dias"==document.querySelector('input[name="opcao"]:checked').value?(document.getElementById("opcoesPeriodo").hidden=!1,document.getElementById("opcoesKm").hidden=!0):(document.getElementById("opcoesPeriodo").hidden=!0,document.getElementById("opcoesKm").hidden=!1)}function a(){var e=function(e){var o=document.getElementById("origem");Geocoder.geocodeLatLng(e.coords.latitude+","+e.coords.longitude,o)},o=function(e){var o="Unknown error";switch(e.code){case 1:o="Permission denied";break;case 2:o="Position unavailable";break;case 3:o="Timeout"}AppCarro.mostraNotificacao("Localização",o,"error")},t={enableHighAccuracy:!0,timeout:1e3,maximumAge:0};navigator.geolocation.getCurrentPosition(e,o,t)}function n(){return d.opcaoDiasRb.addEventListener("change",t,!1),d.opcaoKmRb.addEventListener("change",t,!1),d.btnAdicionarSimulacao.addEventListener("click",i,!1),t(),a(),o(),d.carregaSimulacoes(),d}function i(){var e=d.carroDd.options[d.carroDd.selectedIndex].value,o=d.edtNomeCliente.value,t=d.edtOrigem.value,a=d.edtDestino.value,n=document.querySelector('input[name="opcao"]:checked').value,i=d.edtDataInicio.value,c=d.edtDataFim.value,r=new Simulacao(e,o,n,i,c,t,a);AppCarro.getSimulacoes().push(r),AppCarro.persisteSimulacoes(),AppCarro.mostraNotificacao("Simulações","Simulação salva com sucesso","success")}function c(e,o){var t=AppCarro.getSimulacoes();window.confirm("Confirma a exclusão do registro?")&&(d.lista.removeChild(e),t.splice(t.indexOf(o),1),AppCarro.persisteSimulacoes(),AppCarro.mostraNotificacao("Simulações","Simulação removida com sucesso","success"))}var d={};return d.lista=e,d.opcaoDiasRb=document.getElementById("opcaoDias"),d.opcaoKmRb=document.getElementById("opcaoKm"),d.carroDd=document.getElementById("carroEscolhido"),d.edtNomeCliente=document.getElementById("nomeCliente"),d.edtOrigem=document.getElementById("origem"),d.edtDestino=document.getElementById("destino"),d.edtDataInicio=document.getElementById("dateInicio"),d.edtDataFim=document.getElementById("dateFim"),d.btnAdicionarSimulacao=document.getElementById("btnAdicionarSimulacao"),d.preencheCarros=o,d.carregaSimulacoes=function(){d.lista.textContent="";for(var e=AppCarro.getSimulacoes(),o=0;o<e.length;o++)d.adicionaSimulacaoLista(e[o])},d.adicionaSimulacaoLista=function(e){var o=document.getElementById("simulacaoListItem"),t=o.content.firstElementChild.cloneNode(!0);TPC.replaceWithData(t,e);var a=t.getElementsByClassName("deleta-simulacao")[0];a.addEventListener("click",function(){c(t,e)},!1),d.lista.appendChild(t)},d.limpaCampos=function(){this.edtNomeCliente.value="",this.edtDataInicio.value="",this.edtDataFim.value="",this.edtDestino.value="",this.carroDd.selectedIndex=0},n()}
